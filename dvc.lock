schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 0a4b9e8ffa77a6ae06f83aec7655b74c
      size: 1396
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 0a09c56cdf0b31883e8f22da94ef5e82
      size: 1762
    params:
      params.yaml:
        concatenation:
          input_path: data/raw
          output_path: data/raw
          output_filename: car_raw.csv
    outs:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: ef643bfd05044c9636a4987283468b07
      size: 1092554
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3c667ecfc4d22c8df8acd19e92f1de16
      size: 44213
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 2edb89411724247a8bf787a3eb71d19b
      size: 88780
    - path: data/processed/X_train.csv
      hash: md5
      md5: 603b7df047c46c8dd9004445f17f6c46
      size: 177269
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: bc744276dfd6005c10e4b27ae35e7111
      size: 354625
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 7de923ce47c181889aac87bcfaa1dfc1
      size: 4963
    - path: src/stages/train.py
      hash: md5
      md5: 6c0c23e887335cfc163a8f83cc27062c
      size: 1882
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 22e5d6135ccd433a0d128cc3d74bdc6f
      size: 418784
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: ef643bfd05044c9636a4987283468b07
      size: 1092554
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: 6a333e110e9f76415be1b4d4ed44270e
      size: 3222
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: minmax
          test_size: 0.2
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3c667ecfc4d22c8df8acd19e92f1de16
      size: 44213
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 2edb89411724247a8bf787a3eb71d19b
      size: 88780
    - path: data/processed/X_train.csv
      hash: md5
      md5: 603b7df047c46c8dd9004445f17f6c46
      size: 177269
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: bc744276dfd6005c10e4b27ae35e7111
      size: 354625
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 7de923ce47c181889aac87bcfaa1dfc1
      size: 4963
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3c667ecfc4d22c8df8acd19e92f1de16
      size: 44213
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 22e5d6135ccd433a0d128cc3d74bdc6f
      size: 418784
    - path: src/stages/evaluate.py
      hash: md5
      md5: 14ce6ade042b69ca8f9023dd33c52c94
      size: 2525
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: ddf454b06e7bcfd8bb3cce4331679195
      size: 110
