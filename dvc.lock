schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 6b6beb578782ee171b3b6047a6e2eb23
      size: 1335
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 0a09c56cdf0b31883e8f22da94ef5e82
      size: 1762
    params:
      params.yaml:
        concatenation:
          input_path: data/raw
          output_path: data/raw
          output_filename: car_raw.csv
    outs:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: 6676760733622a017841df3164b74d50
      size: 1717466
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 936ee1e4d662e8b853af2c28a5e19834
      size: 35127
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 20ec6cbdb1ab76d4136812a4e69b73b4
      size: 81361
    - path: data/processed/X_train.csv
      hash: md5
      md5: f2fe84d2cf03edd7d3ad1cddcaf8502a
      size: 315167
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 2dbaca18f532021bb323582c5be3ffd1
      size: 731443
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 020706f589d2ce816b1f46080078320e
      size: 4947
    - path: src/stages/train.py
      hash: md5
      md5: 6c0c23e887335cfc163a8f83cc27062c
      size: 1882
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 791fedeae57ae3653dd00c5677e75ed2
      size: 382824
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: 6676760733622a017841df3164b74d50
      size: 1717466
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: 6a333e110e9f76415be1b4d4ed44270e
      size: 3222
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: standard
          test_size: 0.1
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 936ee1e4d662e8b853af2c28a5e19834
      size: 35127
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 20ec6cbdb1ab76d4136812a4e69b73b4
      size: 81361
    - path: data/processed/X_train.csv
      hash: md5
      md5: f2fe84d2cf03edd7d3ad1cddcaf8502a
      size: 315167
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 2dbaca18f532021bb323582c5be3ffd1
      size: 731443
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 020706f589d2ce816b1f46080078320e
      size: 4947
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 936ee1e4d662e8b853af2c28a5e19834
      size: 35127
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 791fedeae57ae3653dd00c5677e75ed2
      size: 382824
    - path: src/stages/evaluate.py
      hash: md5
      md5: 14ce6ade042b69ca8f9023dd33c52c94
      size: 2525
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: 36bd3b33ba77915285a97c9717f866b5
      size: 110
