schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 0a4b9e8ffa77a6ae06f83aec7655b74c
      size: 1396
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 0a09c56cdf0b31883e8f22da94ef5e82
      size: 1762
    params:
      params.yaml:
        concatenation:
          input_path: data/raw
          output_path: data/raw
          output_filename: car_raw.csv
    outs:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: 6cbb6b7183f3ce159efa19cb03853b60
      size: 924310
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 6d919250f5024f0595b9566b5accf85c
      size: 37448
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: bc4aa056cd039048d89be802e7bda17a
      size: 85807
    - path: data/processed/X_train.csv
      hash: md5
      md5: 060ae947d0f781e6f8e4a8c8c474b5c0
      size: 149220
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 3c7e1fe548e755c8e5a422906eb4b534
      size: 342716
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: aa4c0151435040505d75c904ddef1ac5
      size: 2733
    - path: src/stages/train.py
      hash: md5
      md5: e82b8b5ad5e8a9a8dfcb55740bb92967
      size: 1873
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 7e5ef8122583477e482cff0cf4203d50
      size: 284526
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: 6cbb6b7183f3ce159efa19cb03853b60
      size: 924310
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: 6a333e110e9f76415be1b4d4ed44270e
      size: 3222
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.01
          scaler_method: standard
          test_size: 0.2
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 6d919250f5024f0595b9566b5accf85c
      size: 37448
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: bc4aa056cd039048d89be802e7bda17a
      size: 85807
    - path: data/processed/X_train.csv
      hash: md5
      md5: 060ae947d0f781e6f8e4a8c8c474b5c0
      size: 149220
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 3c7e1fe548e755c8e5a422906eb4b534
      size: 342716
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: aa4c0151435040505d75c904ddef1ac5
      size: 2733
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 6d919250f5024f0595b9566b5accf85c
      size: 37448
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 7e5ef8122583477e482cff0cf4203d50
      size: 284526
    - path: src/stages/evaluate.py
      hash: md5
      md5: 14ce6ade042b69ca8f9023dd33c52c94
      size: 2525
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: de7ab705e9420978bb0541e216093dbc
      size: 111
