schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 6b6beb578782ee171b3b6047a6e2eb23
      size: 1335
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 23a7f664b51c66c83d9f6e8c1bc0d097
      size: 1840
    params:
      params.yaml:
        concatenation:
          input_path: data/raw
          output_path: data/raw
          output_filename: car_raw.csv
    outs:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: ffc0bd47faf4d84d7f4d0ad4c0e91500
      size: 2861127
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: a8c654236e4fbd2440c042e64dab13d2
      size: 133217
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: ac4fc045038898a9733f6b42b5adece3
      size: 238483
    - path: data/processed/X_train.csv
      hash: md5
      md5: 6f25d7afca78ee633a42784e56d9aad9
      size: 533401
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 0feef9332a7e42ff90c32d2dcc44401f
      size: 953305
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 1df2ec519593bf5a5d3f8de15af7428f
      size: 8299
    - path: src/stages/train.py
      hash: md5
      md5: 91aeb499dbd74d182d0240fa050e5ef7
      size: 1933
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 3b7bb257ff8a1afe216207bac0ace972
      size: 292308
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: ffc0bd47faf4d84d7f4d0ad4c0e91500
      size: 2861127
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: 79465c17e741631898e585989576858d
      size: 3232
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: minmax
          test_size: 0.2
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: a8c654236e4fbd2440c042e64dab13d2
      size: 133217
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: ac4fc045038898a9733f6b42b5adece3
      size: 238483
    - path: data/processed/X_train.csv
      hash: md5
      md5: 6f25d7afca78ee633a42784e56d9aad9
      size: 533401
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 0feef9332a7e42ff90c32d2dcc44401f
      size: 953305
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 1df2ec519593bf5a5d3f8de15af7428f
      size: 8299
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: a8c654236e4fbd2440c042e64dab13d2
      size: 133217
    - path: models/final_pipeline.joblib
      hash: md5
      md5: 3b7bb257ff8a1afe216207bac0ace972
      size: 292308
    - path: src/stages/evaluate.py
      hash: md5
      md5: 14ce6ade042b69ca8f9023dd33c52c94
      size: 2525
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: d553f4c37b721487f23a47e1933e525c
      size: 111
