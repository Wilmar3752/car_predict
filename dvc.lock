schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 845129524d797d671fdaf53cf8f2b360
      size: 1531
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 23a7f664b51c66c83d9f6e8c1bc0d097
      size: 1840
    params:
      params.yaml:
        concatenation:
          input_path: data/raw/carros
          output_path: data/raw
          output_filename: car_raw.csv
    outs:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: e1f4d8d8e5f477b69fdca827d1bd1372
      size: 8707811
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 9ec6e8ca36650b88cb47482f9f0821ef
      size: 89273
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: ac0aa63b16b0c6d2d83cace917190575
      size: 198234
    - path: data/processed/X_train.csv
      hash: md5
      md5: eaa5c0944c9a3caddc2f174f06f42666
      size: 803416
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 06656725a7517998de1764f4efa80b0e
      size: 1786502
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: c5d553c12add0bc1a3b0dcc2eb44cdb7
      size: 24923
    - path: src/stages/train.py
      hash: md5
      md5: 939652888d7f5cccf41c3a222be18b5e
      size: 1852
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: fbdfd28200c0d00f74a77a6752ce9d8a
      size: 211590
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: e1f4d8d8e5f477b69fdca827d1bd1372
      size: 8707811
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: 8f456709b158fc9466e0a9f6d9827659
      size: 3585
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: minmax
          test_size: 0.1
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 9ec6e8ca36650b88cb47482f9f0821ef
      size: 89273
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: ac0aa63b16b0c6d2d83cace917190575
      size: 198234
    - path: data/processed/X_train.csv
      hash: md5
      md5: eaa5c0944c9a3caddc2f174f06f42666
      size: 803416
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: 06656725a7517998de1764f4efa80b0e
      size: 1786502
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: c5d553c12add0bc1a3b0dcc2eb44cdb7
      size: 24923
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 9ec6e8ca36650b88cb47482f9f0821ef
      size: 89273
    - path: models/final_pipeline.joblib
      hash: md5
      md5: fbdfd28200c0d00f74a77a6752ce9d8a
      size: 211590
    - path: src/stages/evaluate.py
      hash: md5
      md5: b011553596ca667786963ade90dc9696
      size: 3077
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: 3dc9edf2fc0fde869a04116d5c591e56
      size: 154
