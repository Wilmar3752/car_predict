schema: '2.0'
stages:
  data_extraction:
    cmd: python src/stages/extraction.py --config params.yaml
    deps:
    - path: src/stages/extraction.py
      hash: md5
      md5: 6b6beb578782ee171b3b6047a6e2eb23
      size: 1335
    params:
      params.yaml:
        extraction:
          bucket_name: scraper-meli
          download_directory: data/raw
  data_concatenation:
    cmd: python src/stages/concatenation.py --config params.yaml
    deps:
    - path: src/stages/concatenation.py
      hash: md5
      md5: 0a09c56cdf0b31883e8f22da94ef5e82
      size: 1762
    params:
      params.yaml:
        concatenation:
          input_path: data/raw
          output_path: data/raw
          output_filename: car_raw.csv
    outs:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: 808df0b28acf09bbbf5afc92e8fc6737
      size: 1404990
  train:
    cmd: python src/stages/train.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 715803a8fa1978af5c436b30534075a4
      size: 28767
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 51f23c4b3675b8924c0e1ff4d61de164
      size: 54780
    - path: data/processed/X_train.csv
      hash: md5
      md5: 3bd0e1d9c1bca20aad66eac58017868d
      size: 257237
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: be4c82ee053cef0276838eeedc1218b8
      size: 493644
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 2095e146be26d076a9e6dd59c1835d2c
      size: 5107
    - path: src/stages/train.py
      hash: md5
      md5: 6c0c23e887335cfc163a8f83cc27062c
      size: 1882
    params:
      params.yaml:
        train:
          final_model: models/final_pipeline.joblib
    outs:
    - path: models/final_pipeline.joblib
      hash: md5
      md5: e353f1b503ae6027e819375c0588d144
      size: 587744
  feature_engineering:
    cmd: python src/stages/feature_engineering.py --config params.yaml
    deps:
    - path: data/raw/car_raw.csv
      hash: md5
      md5: 808df0b28acf09bbbf5afc92e8fc6737
      size: 1404990
    - path: src/stages/feature_engineering.py
      hash: md5
      md5: 6a333e110e9f76415be1b4d4ed44270e
      size: 3222
    params:
      params.yaml:
        feature_engineering:
          rarelabel_tol: 0.001
          scaler_method: minmax
          test_size: 0.1
          pipeline: models/feature_engineering_pipeline.joblib
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 715803a8fa1978af5c436b30534075a4
      size: 28767
    - path: data/processed/X_test_tranformed.csv
      hash: md5
      md5: 51f23c4b3675b8924c0e1ff4d61de164
      size: 54780
    - path: data/processed/X_train.csv
      hash: md5
      md5: 3bd0e1d9c1bca20aad66eac58017868d
      size: 257237
    - path: data/processed/X_train_transformed.csv
      hash: md5
      md5: be4c82ee053cef0276838eeedc1218b8
      size: 493644
    - path: models/feature_engineering_pipeline.joblib
      hash: md5
      md5: 2095e146be26d076a9e6dd59c1835d2c
      size: 5107
  evaluate:
    cmd: python src/stages/evaluate.py --config params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 715803a8fa1978af5c436b30534075a4
      size: 28767
    - path: models/final_pipeline.joblib
      hash: md5
      md5: e353f1b503ae6027e819375c0588d144
      size: 587744
    - path: src/stages/evaluate.py
      hash: md5
      md5: 14ce6ade042b69ca8f9023dd33c52c94
      size: 2525
    params:
      params.yaml:
        evaluate:
          metrics: metrics.json
          confusion_matrix_image: confusion_matrix.png
          confusion_matrix_data: confusion_matrix_data.csv
          roc_auc_plot: roc_curve.png
          feature_importance_plot: feature_importance.png
    outs:
    - path: experiments/metrics.json
      hash: md5
      md5: 7509cc78e5dcd397ee801d29f17825f6
      size: 110
